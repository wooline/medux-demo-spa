(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{252:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));class r{constructor(e,t,n){this.code=e,this.message=t,this.detail=n}}class a extends r{constructor(){super("401","请登录")}}},254:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(263),n(139),n(253);var r=n(264),a=n.n(r),o=n(252);function i(e,t,n={},r={}){t=t.replace(/:\w+/g,e=>{const t=e.substr(1);if(n[t]){const e=n[t];return delete n[t],encodeURIComponent(e)}return""}),Object.keys(initEnv.apiServerPath).some(e=>{const n=new RegExp(e);return!!n.test(t)&&(t=t.replace(n,initEnv.apiServerPath[e]),!0)});const o={method:e,url:t,params:n,data:r};return a.a.request(o).then(e=>e.data)}a.a.interceptors.response.use(e=>e,e=>{!function(e){const t=e.response?e.response.status:0,n=e.response?e.response.data:"",r=n&&n.message?n.message:"failed to call "+e.config.url;throw new o.a(r,t.toString(),n)}(e)})},261:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));var r=n(257),a=n(269),o=n(0),i=n.n(o);let s;!function(e){e.LIVE="icon-live",e.MESSAGE="icon-message",e.PICTURE="icon-picture",e.PLAY_CIRCLE="icon-play-circle",e.RELOAD="icon-reload",e.LOCATION="icon-location",e.HEART="icon-heart"}(s||(s={}));class l extends i.a.PureComponent{render(){const e=this.props,{type:t,text:n,textPosition:o,className:s}=e,l=Object(a.a)(e,["type","text","textPosition","className"]);return n?"left"===o?i.a.createElement("div",Object(r.a)({className:"iconfont-with-text-on-left "+(s||"")},l),i.a.createElement("span",null,n),i.a.createElement("i",Object(r.a)({className:"iconfont "+t},l))):i.a.createElement("div",Object(r.a)({className:"iconfont-with-text-on-right "+(s||"")},l),i.a.createElement("i",Object(r.a)({className:"iconfont "+t},l)),i.a.createElement("span",null,n)):i.a.createElement("i",Object(r.a)({className:"iconfont "+t+" "+(s||"")},l))}}},269:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}n.d(t,"a",(function(){return r}))},292:function(e,t,n){var r=n(33),a=n(20),o=n(42);e.exports=function(e,t){var n=(a.Object||{})[e]||Object[e],i={};i[e]=t(n),r(r.S+r.F*o((function(){n(1)})),"Object",i)}},325:function(e,t,n){"use strict";t.__esModule=!0;var r=o(n(326)),a=o(n(329));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function e(t,n,o){null===t&&(t=Function.prototype);var i=(0,a.default)(t,n);if(void 0===i){var s=(0,r.default)(t);return null===s?void 0:e(s,n,o)}if("value"in i)return i.value;var l=i.get;return void 0!==l?l.call(o):void 0}},326:function(e,t,n){e.exports={default:n(327),__esModule:!0}},327:function(e,t,n){n(328),e.exports=n(20).Object.getPrototypeOf},328:function(e,t,n){var r=n(65),a=n(148);n(292)("getPrototypeOf",(function(){return function(e){return a(r(e))}}))},329:function(e,t,n){e.exports={default:n(330),__esModule:!0}},330:function(e,t,n){n(331);var r=n(20).Object;e.exports=function(e,t){return r.getOwnPropertyDescriptor(e,t)}},331:function(e,t,n){var r=n(34),a=n(105).f;n(292)("getOwnPropertyDescriptor",(function(){return function(e,t){return a(r(e),t)}}))},433:function(e,t,n){"use strict";n.r(t);n(262),n(95),n(138),n(253),n(135);var r=n(3),a=n(97),o=n(19);let i;!function(e){e.init="init",e.configLoaded="configLoaded",e.startupImageLoaded="startupImageLoaded",e.startupCountEnd="startupCountEnd",e.startupAnimateEnd="startupAnimateEnd"}(i||(i={}));var s=n(254);var l=new class{getCurUser(){return Object(s.a)("get","/ajax/session").then(e=>(e.avatarUrl=initEnv.clientPublicPath+e.avatarUrl,e))}login(e){return Object(s.a)("put","/ajax/session",{},e).then(e=>(e.avatarUrl=initEnv.clientPublicPath+e.avatarUrl,e))}getSettings(){return Object(s.a)("get","/ajax/project-config").then(e=>(e.logoUrl=initEnv.clientPublicPath+e.logoUrl,e.startupPage.imageUrl=initEnv.clientPublicPath+e.startupPage.imageUrl,e))}reportError(e){return console.log("report",e.message),Promise.resolve(!0)}};function c(e){var t,n=m(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var r={kind:"field"===e.kind?"field":"method",key:n,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(r.decorators=e.decorators),"field"===e.kind&&(r.initializer=e.value),r}function u(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function p(e){return e.decorators&&e.decorators.length}function d(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function f(e,t){var n=e[t];if(void 0!==n&&"function"!=typeof n)throw new TypeError("Expected '"+t+"' to be a function");return n}function m(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const h={projectConfig:null,curUser:null,startupStep:i.init,loading:{global:o.c.Stop,login:o.c.Stop}};let v=function(e,t,n,r){var o=function(){(function(){return e});var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){["method","field"].forEach((function(n){t.forEach((function(t){t.kind===n&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var n=e.prototype;["method","field"].forEach((function(r){t.forEach((function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var o="static"===a?e:n;this.defineClassElement(o,t)}}),this)}),this)},defineClassElement:function(e,t){var n=t.descriptor;if("field"===t.kind){var r=t.initializer;n={enumerable:n.enumerable,writable:n.writable,configurable:n.configurable,value:void 0===r?void 0:r.call(e)}}Object.defineProperty(e,t.key,n)},decorateClass:function(e,t){var n=[],r=[],a={static:[],prototype:[],own:[]};if(e.forEach((function(e){this.addElementPlacement(e,a)}),this),e.forEach((function(e){if(!p(e))return n.push(e);var t=this.decorateElement(e,a);n.push(t.element),n.push.apply(n,t.extras),r.push.apply(r,t.finishers)}),this),!t)return{elements:n,finishers:r};var o=this.decorateConstructor(n,t);return r.push.apply(r,o.finishers),o.finishers=r,o},addElementPlacement:function(e,t,n){var r=t[e.placement];if(!n&&-1!==r.indexOf(e.key))throw new TypeError("Duplicated element ("+e.key+")");r.push(e.key)},decorateElement:function(e,t){for(var n=[],r=[],a=e.decorators,o=a.length-1;o>=0;o--){var i=t[e.placement];i.splice(i.indexOf(e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[o])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&r.push(l.finisher);var c=l.extras;if(c){for(var u=0;u<c.length;u++)this.addElementPlacement(c[u],t);n.push.apply(n,c)}}return{element:e,finishers:r,extras:n}},decorateConstructor:function(e,t){for(var n=[],r=t.length-1;r>=0;r--){var a=this.fromClassDescriptor(e),o=this.toClassDescriptor((0,t[r])(a)||a);if(void 0!==o.finisher&&n.push(o.finisher),void 0!==o.elements){e=o.elements;for(var i=0;i<e.length-1;i++)for(var s=i+1;s<e.length;s++)if(e[i].key===e[s].key&&e[i].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[i].key+")")}}return{elements:e,finishers:n}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){if(void 0!==e)return Object(a.a)(e).map((function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var n=m(e.key),r=String(e.placement);if("static"!==r&&"prototype"!==r&&"own"!==r)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+r+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var o={kind:t,key:n,placement:r,descriptor:Object.assign({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),o.initializer=e.initializer),o},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:f(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:e.map(this.fromElementDescriptor,this)};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var n=f(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:n}},runClassFinishers:function(e,t){for(var n=0;n<t.length;n++){var r=(0,t[n])(e);if(void 0!==r){if("function"!=typeof r)throw new TypeError("Finishers must return a constructor.");e=r}}return e},disallowProperty:function(e,t,n){if(void 0!==e[t])throw new TypeError(n+" can't have a ."+t+" property.")}};return e}();if(r)for(var i=0;i<r.length;i++)o=r[i](o);var s=t((function(e){o.initializeInstanceElements(e,l.elements)}),n),l=o.decorateClass(function(e){for(var t=[],n=function(e){return"method"===e.kind&&e.key===o.key&&e.placement===o.placement},r=0;r<e.length;r++){var a,o=e[r];if("method"===o.kind&&(a=t.find(n)))if(d(o.descriptor)||d(a.descriptor)){if(p(o)||p(a))throw new ReferenceError("Duplicated methods ("+o.key+") can't be decorated.");a.descriptor=o.descriptor}else{if(p(o)){if(p(a))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+o.key+").");a.decorators=o.decorators}u(o,a)}else t.push(o)}return t}(s.d.map(c)),e);return o.initializeClassElements(s.F,l.elements),o.runClassFinishers(s.F,l.finishers)}(null,(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"method",decorators:[o.k],key:"putStartup",value:function(e){return Object(r.a)({},this.state,{startupStep:e})}},{kind:"method",decorators:[o.k],key:"putCurUser",value:function(e){return Object(r.a)({},this.state,{curUser:e})}},{kind:"method",decorators:[o.k],key:"putShowLoginPop",value:function(e){return Object(r.a)({},this.state,{showLoginPop:e})}},{kind:"method",decorators:[o.k],key:"putShowNotFoundPop",value:function(e){return Object(r.a)({},this.state,{showNotFoundPop:e})}},{kind:"method",decorators:[o.k],key:"putShowSearch",value:function(e){return Object(r.a)({},this.state,{showSearch:e})}},{kind:"method",decorators:[Object(o.e)("login")],key:"login",value:async function(e){const t=await l.login(e);this.dispatch(this.actions.putCurUser(t))}},{kind:"method",decorators:[Object(o.e)(null)],key:o.a.Error,value:async function(e){"401"===e.code?this.dispatch(this.actions.putShowLoginPop(!0)):"404"===e.code?this.dispatch(this.actions.putShowNotFoundPop(!0)):"301"===e.code||"302"===e.code?historyActions.replace(e.detail):(e.message&&message.error(e.message),l.reportError(e))}},{kind:"method",decorators:[Object(o.e)()],key:"this/"+o.a.MInit,value:async function(){const[e,t]=await Promise.all([l.getSettings(),l.getCurUser()]);this.updateState({projectConfig:e,curUser:t,startupStep:i.configLoaded})}}]}}),o.b);n(136),n(239);var g=n(0),b=n.n(g),y=n(15),C=n.n(y);function E(e,t){for(var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector,r=e;r;){if(n.call(r,t))return r;r=r.parentElement}return null}var T=n(27),P=n.n(T),k=n(6),w=n.n(k),x=n(12),S=n.n(x),O=n(11),N=n.n(O),_=n(5),j=n.n(_),I=n(13),B=n.n(I),A=n(18),M=n.n(A),L=n(131),D=function(e){function t(){return N()(this,t),j()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return B()(t,e),S()(t,[{key:"shouldComponentUpdate",value:function(e){return!!e.hiddenClassName||!!e.visible}},{key:"render",value:function(){var e=this.props.className;this.props.hiddenClassName&&!this.props.visible&&(e+=" "+this.props.hiddenClassName);var t=P()({},this.props);return delete t.hiddenClassName,delete t.visible,t.className=e,b.a.createElement("div",P()({},t))}}]),t}(b.a.Component);function U(){}var R=function(e){function t(){N()(this,t);var e=j()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.getDialogElement=function(){var t=e.props,n=t.closable,r=t.prefixCls,a=void 0;t.footer&&(a=b.a.createElement("div",{className:r+"-footer",ref:function(t){return e.footerRef=t}},t.footer));var o=void 0;t.title&&(o=b.a.createElement("div",{className:r+"-header",ref:function(t){return e.headerRef=t}},b.a.createElement("div",{className:r+"-title"},t.title)));var i=void 0;n&&(i=b.a.createElement("button",{onClick:e.close,"aria-label":"Close",className:r+"-close"},b.a.createElement("span",{className:r+"-close-x"})));var s=e.getTransitionName(),l=b.a.createElement(D,{key:"dialog-element",role:"document",ref:function(t){return e.dialogRef=t},style:t.style||{},className:r+" "+(t.className||""),visible:t.visible},b.a.createElement("div",{className:r+"-content"},i,o,b.a.createElement("div",{className:r+"-body",style:t.bodyStyle,ref:function(t){return e.bodyRef=t}},t.children),a));return b.a.createElement(L.a,{key:"dialog",showProp:"visible",onAppear:e.onAnimateAppear,onLeave:e.onAnimateLeave,transitionName:s,component:"",transitionAppear:!0},l)},e.onAnimateAppear=function(){document.body.style.overflow="hidden"},e.onAnimateLeave=function(){document.body.style.overflow="",e.wrapRef&&(e.wrapRef.style.display="none"),e.props.onAnimateLeave&&e.props.onAnimateLeave(),e.props.afterClose&&e.props.afterClose()},e.close=function(t){e.props.onClose&&e.props.onClose(t)},e.onMaskClick=function(t){t.target===t.currentTarget&&e.close(t)},e}return B()(t,e),S()(t,[{key:"componentWillUnmount",value:function(){document.body.style.overflow="",this.wrapRef&&(this.wrapRef.style.display="none")}},{key:"getZIndexStyle",value:function(){var e={},t=this.props;return void 0!==t.zIndex&&(e.zIndex=t.zIndex),e}},{key:"getWrapStyle",value:function(){var e=this.props.wrapStyle||{};return P()({},this.getZIndexStyle(),e)}},{key:"getMaskStyle",value:function(){var e=this.props.maskStyle||{};return P()({},this.getZIndexStyle(),e)}},{key:"getMaskTransitionName",value:function(){var e=this.props,t=e.maskTransitionName,n=e.maskAnimation;return!t&&n&&(t=e.prefixCls+"-"+n),t}},{key:"getTransitionName",value:function(){var e=this.props,t=e.transitionName,n=e.animation;return!t&&n&&(t=e.prefixCls+"-"+n),t}},{key:"getMaskElement",value:function(){var e=this.props,t=void 0;if(e.mask){var n=this.getMaskTransitionName();t=b.a.createElement(D,P()({style:this.getMaskStyle(),key:"mask-element",className:e.prefixCls+"-mask",hiddenClassName:e.prefixCls+"-mask-hidden",visible:e.visible},e.maskProps)),n&&(t=b.a.createElement(L.a,{key:"mask",showProp:"visible",transitionAppear:!0,component:"",transitionName:n},t))}return t}},{key:"render",value:function(){var e=this,t=this.props,n=t.prefixCls,r=t.maskClosable,a=this.getWrapStyle();return t.visible&&(a.display=null),b.a.createElement("div",null,this.getMaskElement(),b.a.createElement("div",P()({className:n+"-wrap "+(t.wrapClassName||""),ref:function(t){return e.wrapRef=t},onClick:r?this.onMaskClick:void 0,role:"dialog","aria-labelledby":t.title,style:a},t.wrapProps),this.getDialogElement()))}}]),t}(b.a.Component),z=R;R.defaultProps={afterClose:U,className:"",mask:!0,visible:!1,closable:!0,maskClosable:!0,prefixCls:"rmc-dialog",onClose:U};var V=!!C.a.createPortal,F=!("undefined"==typeof window||!window.document||!window.document.createElement),G=function(e){function t(){N()(this,t);var e=j()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.saveRef=function(t){V&&(e._component=t)},e.getComponent=function(t){var n=P()({},e.props);return["visible","onAnimateLeave"].forEach((function(e){n.hasOwnProperty(e)&&delete n[e]})),b.a.createElement(z,P()({},n,{visible:t,onAnimateLeave:e.removeContainer,ref:e.saveRef}))},e.removeContainer=function(){e.container&&(V||C.a.unmountComponentAtNode(e.container),e.container.parentNode.removeChild(e.container),e.container=null)},e.getContainer=function(){if(!e.container){var t=document.createElement("div"),n=e.props.prefixCls+"-container-"+(new Date).getTime();t.setAttribute("id",n),document.body.appendChild(t),e.container=t}return e.container},e}return B()(t,e),S()(t,[{key:"componentDidMount",value:function(){this.props.visible&&this.componentDidUpdate()}},{key:"shouldComponentUpdate",value:function(e){var t=e.visible;return!(!this.props.visible&&!t)}},{key:"componentWillUnmount",value:function(){this.props.visible?V?this.removeContainer():this.renderDialog(!1):this.removeContainer()}},{key:"componentDidUpdate",value:function(){V||this.renderDialog(this.props.visible)}},{key:"renderDialog",value:function(e){C.a.unstable_renderSubtreeIntoContainer(this,this.getComponent(e),this.getContainer())}},{key:"render",value:function(){if(!F)return null;var e=this.props.visible;return V&&(e||this._component)?C.a.createPortal(this.getComponent(e),this.getContainer()):null}}]),t}(b.a.Component),W=G;G.defaultProps={visible:!1,prefixCls:"rmc-dialog",onClose:function(){}};var H=n(270),Y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n},X=function(e){function t(){return N()(this,t),j()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return B()(t,e),S()(t,[{key:"renderFooterButton",value:function(e,t,n){var r={};if(e.style&&"string"==typeof(r=e.style)){r={cancel:{},default:{},destructive:{color:"red"}}[r]||{}}return g.createElement(H.a,{activeClassName:t+"-button-active",key:n},g.createElement("a",{className:t+"-button",role:"button",style:r,onClick:function(t){t.preventDefault(),e.onPress&&e.onPress()}},e.text||"Button"))}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.prefixCls,a=n.className,o=n.wrapClassName,i=n.transitionName,s=n.maskTransitionName,l=n.style,c=n.platform,u=n.footer,p=void 0===u?[]:u,d=n.operation,f=n.animated,m=n.transparent,h=n.popup,v=n.animationType,b=Y(n,["prefixCls","className","wrapClassName","transitionName","maskTransitionName","style","platform","footer","operation","animated","transparent","popup","animationType"]),y=M()(r+"-button-group-"+(2!==p.length||d?"v":"h"),r+"-button-group-"+(d?"operation":"normal")),C=p.length?g.createElement("div",{className:y,role:"group"},p.map((function(e,n){return t.renderFooterButton(e,r,n)}))):null,E=void 0,T=void 0;f&&(E=T=m?"am-fade":"am-slide-up",h&&(E="slide-up"===v?"am-slide-up":"am-slide-down",T="am-fade"));var k=M()(o,w()({},r+"-wrap-popup",h)),x=M()(a,(e={},w()(e,r+"-transparent",m),w()(e,r+"-popup",h),w()(e,r+"-popup-"+v,h&&v),w()(e,r+"-android","android"===c),e));return g.createElement(W,P()({},b,{prefixCls:r,className:x,wrapClassName:k,transitionName:i||E,maskTransitionName:s||T,style:l,footer:C}))}}]),t}(function(e){function t(){return N()(this,t),j()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return B()(t,e),t}(g.Component)),$=X;X.defaultProps={prefixCls:"am-modal",transparent:!1,popup:!1,animationType:"slide-down",animated:!0,style:{},onShow:function(){},footer:[],closable:!1,operation:!1,platform:"ios"},$.alert=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[{text:"确定"}],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ios",a=!1;if(!e&&!t)return{close:function(){}};var o=document.createElement("div");function i(){y.unmountComponentAtNode(o),o&&o.parentNode&&o.parentNode.removeChild(o)}document.body.appendChild(o);var s=n.map((function(e){var t=e.onPress||function(){};return e.onPress=function(){if(!a){var e=t();e&&e.then?e.then((function(){a=!0,i()})).catch((function(){})):(a=!0,i())}},e})),l="am-modal";return y.render(g.createElement($,{visible:!0,transparent:!0,title:e,transitionName:"am-zoom",closable:!1,maskClosable:!1,footer:s,maskTransitionName:"am-fade",platform:r,wrapProps:{onTouchStart:function(e){/iPhone|iPod|iPad/i.test(navigator.userAgent)&&(E(e.target,"."+l+"-footer")||e.preventDefault())}}},g.createElement("div",{className:l+"-alert-content"},t)),o),{close:i}},$.prompt=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"default",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:["",""],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"ios",s=!1;if(!n)return{close:function(){}};var l="am-modal",c={text:a="string"==typeof a?a:"number"==typeof a?""+a:""};function u(e){var t=e.target,n=t.getAttribute("type");null!==n&&(c[n]=t.value)}function p(e){var t=e.currentTarget||e.target;t&&t.focus()}function d(){/MicroMessenger/.test(navigator.userAgent)&&(document.body.scrollTop=document.body.scrollTop)}var f=void 0,m=function(e){setTimeout((function(){e&&e.focus()}),500)};switch(r){case"login-password":f=g.createElement("div",{className:l+"-input-container"},g.createElement("div",{className:l+"-input"},g.createElement("label",null,g.createElement("input",{type:"text",defaultValue:c.text,ref:function(e){return m(e)},onClick:p,onChange:u,placeholder:o[0],onBlur:d}))),g.createElement("div",{className:l+"-input"},g.createElement("label",null,g.createElement("input",{type:"password",defaultValue:c.password,onClick:p,onChange:u,placeholder:o[1],onBlur:d}))));break;case"secure-text":f=g.createElement("div",{className:l+"-input-container"},g.createElement("div",{className:l+"-input"},g.createElement("label",null,g.createElement("input",{type:"password",defaultValue:c.password,ref:function(e){return m(e)},onClick:p,onChange:u,placeholder:o[0],onBlur:d}))));break;case"default":default:f=g.createElement("div",{className:l+"-input-container"},g.createElement("div",{className:l+"-input"},g.createElement("label",null,g.createElement("input",{type:"text",defaultValue:c.text,ref:function(e){return m(e)},onClick:p,onChange:u,placeholder:o[0],onBlur:d}))))}var h=g.createElement("div",null,t,f),v=document.createElement("div");function b(){y.unmountComponentAtNode(v),v&&v.parentNode&&v.parentNode.removeChild(v)}function C(e){if("function"==typeof e){var t=c.text,n=void 0===t?"":t,a=c.password,o=void 0===a?"":a,i="login-password"===r?[n,o]:"secure-text"===r?[o]:[n];return e.apply(void 0,i)}}document.body.appendChild(v);var T=("function"==typeof n?[{text:"取消",onPress:function(){}},{text:"确定",onPress:function(){C(n)}}]:n.map((function(e){return{text:e.text,onPress:function(){return C(e.onPress)}}}))).map((function(e){var t=e.onPress||function(){};return e.onPress=function(){if(!s){var e=t();e&&e.then?e.then((function(){s=!0,b()})).catch((function(){})):(s=!0,b())}},e}));return y.render(g.createElement($,{visible:!0,transparent:!0,prefixCls:l,title:e,closable:!1,maskClosable:!1,transitionName:"am-zoom",footer:T,maskTransitionName:"am-fade",platform:i,wrapProps:{onTouchStart:function(e){/iPhone|iPod|iPad/i.test(navigator.userAgent)&&(E(e.target,"."+l+"-content")||e.preventDefault())}}},g.createElement("div",{className:l+"-propmt-content"},h)),v),{close:b}},$.operation=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{text:"确定"}],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ios",n=!1,r=document.createElement("div");function a(){y.unmountComponentAtNode(r),r&&r.parentNode&&r.parentNode.removeChild(r)}document.body.appendChild(r);var o=e.map((function(e){var t=e.onPress||function(){};return e.onPress=function(){if(!n){var e=t();e&&e.then?e.then((function(){n=!0,a()})).catch((function(){})):(n=!0,a())}},e}));return y.render(g.createElement($,{visible:!0,operation:!0,transparent:!0,prefixCls:"am-modal",transitionName:"am-zoom",closable:!1,maskClosable:!0,onClose:a,footer:o,maskTransitionName:"am-fade",className:"am-modal-operation",platform:t,wrapProps:{onTouchStart:function(e){/iPhone|iPod|iPad/i.test(navigator.userAgent)&&(E(e.target,".am-modal-footer")||e.preventDefault())}}}),r),{close:a}};var q=$,K=n(14),Z=(n(323),n(324),n(248)),J=(n(240),n(241),n(242),function(e){return Object.keys(e).reduce((function(t,n){return"aria-"!==n.substr(0,5)&&"data-"!==n.substr(0,5)&&"role"!==n||(t[n]=e[n]),t}),{})}),Q=n(325),ee=n.n(Q),te=1,ne=2,re=4,ae=8,oe=16,ie=ne|re,se=ae|oe,le=ie|se,ce={time:251},ue={threshold:10,velocity:.3};function pe(e,t){return Math.sqrt(e*e+t*t)}function de(e,t){var n=Math.atan2(t,e);return 180/(Math.PI/n)}function fe(){return Date.now()}function me(e){if(!(e.length<2)){var t=e[0],n=t.x,r=t.y,a=e[1],o=a.x-n,i=a.y-r;return{x:o,y:i,z:pe(o,i),angle:de(o,i)}}}function he(e,t){return e+t[0].toUpperCase()+t.slice(1)}function ve(e){var t=void 0;switch(e){case te:break;case ne:t="left";break;case re:t="right";break;case ae:t="up";break;case oe:t="down"}return t}var ge={all:le,vertical:se,horizontal:ie},be=function(e){function t(e){N()(this,t);var n=j()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n.triggerEvent=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var o=n.props[e];"function"==typeof o&&o.apply(void 0,[n.getGestureState()].concat(r))},n.triggerCombineEvent=function(e,t){for(var r=arguments.length,a=Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];n.triggerEvent.apply(n,[e].concat(a)),n.triggerSubEvent.apply(n,[e,t].concat(a))},n.triggerSubEvent=function(e,t){for(var r=arguments.length,a=Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];if(t){var i=he(e,t);n.triggerEvent.apply(n,[i].concat(a))}},n.triggerPinchEvent=function(e,t){for(var r=arguments.length,a=Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var i=n.gesture.scale;"move"===t&&"number"==typeof i&&(i>1&&n.triggerEvent("onPinchOut"),i<1&&n.triggerEvent("onPinchIn")),n.triggerCombineEvent.apply(n,[e,t].concat(a))},n.initPressTimer=function(){n.cleanPressTimer(),n.pressTimer=setTimeout((function(){n.setGestureState({press:!0}),n.triggerEvent("onPress")}),ce.time)},n.cleanPressTimer=function(){n.pressTimer&&clearTimeout(n.pressTimer)},n.setGestureState=function(e){n.gesture||(n.gesture={}),n.gesture.touches&&(n.gesture.preTouches=n.gesture.touches),n.gesture=P()({},n.gesture,e)},n.getGestureState=function(){return n.gesture?P()({},n.gesture):n.gesture},n.cleanGestureState=function(){delete n.gesture},n.getTouches=function(e){return Array.prototype.slice.call(e.touches).map((function(e){return{x:e.screenX,y:e.screenY}}))},n.triggerUserCb=function(e,t){var r=he("onTouch",e);r in n.props&&n.props[r](t)},n._handleTouchStart=function(e){n.triggerUserCb("start",e),n.event=e,e.touches.length>1&&e.preventDefault(),n.initGestureStatus(e),n.initPressTimer(),n.checkIfMultiTouchStart()},n.initGestureStatus=function(e){n.cleanGestureState();var t=n.getTouches(e),r=fe(),a=me(t);n.setGestureState({startTime:r,startTouches:t,startMutliFingerStatus:a,time:r,touches:t,mutliFingerStatus:a,srcEvent:n.event})},n.checkIfMultiTouchStart=function(){var e=n.props,t=e.enablePinch,r=e.enableRotate,a=n.gesture.touches;if(a.length>1&&(t||r)){if(t){var o=me(a);n.setGestureState({startMutliFingerStatus:o,pinch:!0,scale:1}),n.triggerCombineEvent("onPinch","start")}r&&(n.setGestureState({rotate:!0,rotation:0}),n.triggerCombineEvent("onRotate","start"))}},n._handleTouchMove=function(e){n.triggerUserCb("move",e),n.event=e,n.gesture&&(n.cleanPressTimer(),n.updateGestureStatus(e),n.checkIfSingleTouchMove(),n.checkIfMultiTouchMove())},n.checkIfMultiTouchMove=function(){var e=n.gesture,t=e.pinch,r=e.rotate,a=e.touches,o=e.startMutliFingerStatus,i=e.mutliFingerStatus;if(t||r){if(a.length<2)return n.setGestureState({pinch:!1,rotate:!1}),t&&n.triggerCombineEvent("onPinch","cancel"),void(r&&n.triggerCombineEvent("onRotate","cancel"));if(t){var s=i.z/o.z;n.setGestureState({scale:s}),n.triggerPinchEvent("onPinch","move")}if(r){var l=function(e,t){var n=e.angle;return t.angle-n}(o,i);n.setGestureState({rotation:l}),n.triggerCombineEvent("onRotate","move")}}},n.allowGesture=function(){return e=n.gesture.direction,!!(n.directionSetting&e);var e},n.checkIfSingleTouchMove=function(){var e,t,r,a,o,i,s=n.gesture,l=s.pan,c=s.touches,u=s.moveStatus,p=s.preTouches,d=s.availablePan,f=void 0===d||d;if(c.length>1)return n.setGestureState({pan:!1}),void(l&&n.triggerCombineEvent("onPan","cancel"));if(u&&f){var m=(e=p[0],t=c[0],r=e.x,a=e.y,o=t.x-r,i=t.y-a,0===o&&0===i?te:Math.abs(o)>=Math.abs(i)?o<0?ne:re:i<0?ae:oe);n.setGestureState({direction:m});var h=ve(m);if(!n.allowGesture())return void(l||n.setGestureState({availablePan:!1}));l?(n.triggerCombineEvent("onPan",h),n.triggerSubEvent("onPan","move")):(n.triggerCombineEvent("onPan","start"),n.setGestureState({pan:!0,availablePan:!0}))}},n.checkIfMultiTouchEnd=function(e){var t=n.gesture,r=t.pinch,a=t.rotate;r&&n.triggerCombineEvent("onPinch",e),a&&n.triggerCombineEvent("onRotate",e)},n.updateGestureStatus=function(e){var t=fe();if(n.setGestureState({time:t}),e.touches&&e.touches.length){var r=n.gesture,a=r.startTime,o=r.startTouches,i=r.pinch,s=r.rotate,l=n.getTouches(e),c=function(e,t,n){var r=e[0],a=r.x,o=r.y,i=t[0],s=i.x-a,l=i.y-o,c=pe(s,l);return{x:s,y:l,z:c,time:n,velocity:c/n,angle:de(s,l)}}(o,l,t-a),u=void 0;(i||s)&&(u=me(l)),n.setGestureState({touches:l,mutliFingerStatus:u,moveStatus:c})}},n._handleTouchEnd=function(e){n.triggerUserCb("end",e),n.event=e,n.gesture&&(n.cleanPressTimer(),n.updateGestureStatus(e),n.doSingleTouchEnd("end"),n.checkIfMultiTouchEnd("end"))},n._handleTouchCancel=function(e){n.triggerUserCb("cancel",e),n.event=e,n.gesture&&(n.cleanPressTimer(),n.updateGestureStatus(e),n.doSingleTouchEnd("cancel"),n.checkIfMultiTouchEnd("cancel"))},n.triggerAllowEvent=function(e,t){n.allowGesture()?n.triggerCombineEvent(e,t):n.triggerSubEvent(e,t)},n.doSingleTouchEnd=function(e){var t=n.gesture,r=t.moveStatus,a=t.pinch,o=t.rotate,i=t.press,s=t.pan,l=t.direction;if(!a&&!o){if(r){var c=function(e,t){return Math.abs(e)>=ue.threshold&&Math.abs(t)>ue.velocity}(r.z,r.velocity);if(n.setGestureState({swipe:c}),s&&n.triggerAllowEvent("onPan",e),c){var u=ve(l);return void n.triggerAllowEvent("onSwipe",u)}}i?n.triggerEvent("onPressUp"):n.triggerEvent("onTap")}},n.getTouchAction=function(){var e=n.props,t=e.enablePinch,r=e.enableRotate,a=n.directionSetting;return t||r||a===le?"pan-x pan-y":a===se?"pan-x":a===ie?"pan-y":"auto"},n.directionSetting=ge[e.direction],n}return B()(t,e),S()(t,[{key:"componentWillUnmount",value:function(){this.cleanPressTimer()}},{key:"render",value:function(){var e=this.props.children,t=b.a.Children.only(e),n=this.getTouchAction(),r={onTouchStart:this._handleTouchStart,onTouchMove:this._handleTouchMove,onTouchCancel:this._handleTouchCancel,onTouchEnd:this._handleTouchEnd};return b.a.cloneElement(t,P()({},r,{style:P()({touchAction:n},t.props.style||{})}))}}]),t}(g.Component),ye=be;function Ce(e){return{transform:e,WebkitTransform:e,MozTransform:e}}function Ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"px";return"translate3d("+(e=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?"0px, "+e+t+", 0px":""+e+t+", 0px, 0px")+")"}function Te(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"px",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];arguments.length>4&&void 0!==arguments[4]&&arguments[4]?r?e.style.top=""+t+n:e.style.left=""+t+n:Pe(e.style,Ee(t,n,r))}function Pe(e,t){e.transform=t,e.webkitTransform=t,e.mozTransform=t}be.defaultProps={enableRotate:!1,enablePinch:!1,direction:"all"};var ke=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n},we=function(e){function t(){N()(this,t);var e=j()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.offsetX=0,e.offsetY=0,e.setLayout=function(t){e.layout=t},e}return B()(t,e),S()(t,[{key:"componentWillReceiveProps",value:function(e){this.props.active!==e.active&&(e.active?(this.offsetX=0,this.offsetY=0):(this.offsetX=this.layout.scrollLeft,this.offsetY=this.layout.scrollTop))}},{key:"render",value:function(){var e=this.props,t=(e.active,e.fixX),n=e.fixY,r=ke(e,["active","fixX","fixY"]),a=P()({},t&&this.offsetX?Ce(Ee(-this.offsetX,"px",!1)):{},n&&this.offsetY?Ce(Ee(-this.offsetY,"px",!0)):{});return b.a.createElement("div",P()({},r,{style:a,ref:this.setLayout}),r.children)}}]),t}(b.a.PureComponent);we.defaultProps={fixX:!0,fixY:!0};var xe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n},Se=function e(){N()(this,e),this.transform="",this.isMoving=!1,this.showPrev=!1,this.showNext=!1},Oe=function(e){function t(e){N()(this,t);var n,r,a=j()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onPan=(n=0,r=0,{onPanStart:function(){a.setState({isMoving:!0})},onPanMove:function(e){if(e.moveStatus&&a.layout){var t=a.isTabBarVertical(),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.isTabBarVertical(),t=+(""+n).replace("%","");return(""+n).indexOf("%")>=0&&(t/=100,t*=e?a.layout.clientHeight:a.layout.clientWidth),t}()+(t?e.moveStatus.y:e.moveStatus.x),i=t?-a.layout.scrollHeight+a.layout.clientHeight:-a.layout.scrollWidth+a.layout.clientWidth;o=Math.min(o,0),o=Math.max(o,i),Te(a.layout,o,"px",t),r=o,a.setState({showPrev:-o>0,showNext:o>i})}},onPanEnd:function(){var e=a.isTabBarVertical();n=r,a.setState({isMoving:!1,transform:Ee(r,"px",e)})},setCurrentOffset:function(e){return n=e}}),a.getTransformByIndex=function(e){var t=e.activeTab,n=e.tabs,r=e.page,o=void 0===r?0:r,i=a.isTabBarVertical(),s=a.getTabSize(o,n.length),l=o/2,c=Math.min(t,n.length-l-.5),u=Math.min(-(c-l+.5)*s,0);return a.onPan.setCurrentOffset(u+"%"),{transform:Ee(u,"%",i),showPrev:t>l-.5&&n.length>o,showNext:t<n.length-l-.5&&n.length>o}},a.onPress=function(e){var t=a.props,n=t.goToTab,r=t.onTabClick,o=t.tabs;r&&r(o[e],e),n&&n(e)},a.isTabBarVertical=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.props.tabBarPosition;return"left"===e||"right"===e},a.renderTab=function(e,t,n,r){var o=a.props,i=o.prefixCls,s=o.renderTab,l=o.activeTab,c=o.tabBarTextStyle,u=o.tabBarActiveTextColor,p=o.tabBarInactiveTextColor,d=o.instanceId,f=P()({},c),m=i+"-tab",h=!1;return l===t?(m+=" "+m+"-active",h=!0,u&&(f.color=u)):p&&(f.color=p),b.a.createElement("div",{key:"t_"+t,style:P()({},f,r?{height:n+"%"}:{width:n+"%"}),id:"m-tabs-"+d+"-"+t,role:"tab","aria-selected":h,className:m,onClick:function(){return a.onPress(t)}},s?s(e):e.title)},a.setContentLayout=function(e){a.layout=e},a.getTabSize=function(e,t){return 100/Math.min(e,t)},a.state=P()({},new Se,a.getTransformByIndex(e)),a}return B()(t,e),S()(t,[{key:"componentWillReceiveProps",value:function(e){this.props.activeTab===e.activeTab&&this.props.tabs===e.tabs&&this.props.tabs.length===e.tabs.length||this.setState(P()({},this.getTransformByIndex(e)))}},{key:"render",value:function(){var e=this,t=this.props,n=t.prefixCls,r=t.animated,a=t.tabs,o=void 0===a?[]:a,i=t.page,s=void 0===i?0:i,l=t.activeTab,c=void 0===l?0:l,u=t.tabBarBackgroundColor,p=t.tabBarUnderlineStyle,d=t.tabBarPosition,f=t.renderUnderline,m=this.state,h=m.isMoving,v=m.transform,g=m.showNext,y=m.showPrev,C=this.isTabBarVertical(),E=o.length>s,T=this.getTabSize(s,o.length),k=o.map((function(t,n){return e.renderTab(t,n,T,C)})),w=n;r&&!h&&(w+=" "+n+"-animated");var x={backgroundColor:u||""},S=E?P()({},Ce(v)):{},O=this.onPan,N=(O.setCurrentOffset,xe(O,["setCurrentOffset"])),_={style:P()({},C?{height:T+"%"}:{width:T+"%"},C?{top:T*c+"%"}:{left:T*c+"%"},p),className:n+"-underline"};return b.a.createElement("div",{className:w+" "+n+"-"+d,style:x},y&&b.a.createElement("div",{className:n+"-prevpage"}),b.a.createElement(ye,P()({},N,{direction:C?"vertical":"horizontal"}),b.a.createElement("div",{role:"tablist",className:n+"-content",style:S,ref:this.setContentLayout},k,f?f(_):b.a.createElement("div",_))),g&&b.a.createElement("div",{className:n+"-nextpage"}))}}]),t}(b.a.PureComponent);Oe.defaultProps={prefixCls:"rmc-tabs-tab-bar",animated:!0,tabs:[],goToTab:function(){},activeTab:0,page:5,tabBarUnderlineStyle:{},tabBarBackgroundColor:"#fff",tabBarActiveTextColor:"",tabBarInactiveTextColor:"",tabBarTextStyle:{}};var Ne=0,_e=function(e){function t(e){N()(this,t);var n=j()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.tabCache={},n.isTabVertical=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props.tabDirection;return"vertical"===e},n.shouldRenderTab=function(e){var t=n.props.prerenderingSiblingsNumber,r=void 0===t?0:t,a=n.state.currentTab,o=void 0===a?0:a;return o-r<=e&&e<=o+r},n.getOffsetIndex=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.props.distanceToChangeTab||0,a=Math.abs(e/t),o=a>n.state.currentTab?"<":">",i=Math.floor(a);switch(o){case"<":return a-i>r?i+1:i;case">":return 1-a+i>r?i:i+1;default:return Math.round(a)}},n.getSubElements=function(){var e=n.props.children,t={};return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"$i$-",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$ALL$";return Array.isArray(e)?e.forEach((function(e,r){e.key&&(t[e.key]=e),t[""+n+r]=e})):e&&(t[r]=e),t}},n.state={currentTab:n.getTabIndex(e)},n.nextCurrentTab=n.state.currentTab,n.instanceId=Ne++,n}return B()(t,e),S()(t,[{key:"getTabIndex",value:function(e){var t=e.page,n=e.initialPage,r=e.tabs,a=(void 0!==t?t:n)||0,o=0;return"string"==typeof a?r.forEach((function(e,t){e.key===a&&(o=t)})):o=a||0,o<0?0:o}},{key:"componentWillReceiveProps",value:function(e){this.props.page!==e.page&&void 0!==e.page&&this.goToTab(this.getTabIndex(e),!0,{},e)}},{key:"componentDidMount",value:function(){this.prevCurrentTab=this.state.currentTab}},{key:"componentDidUpdate",value:function(){this.prevCurrentTab=this.state.currentTab}},{key:"goToTab",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.props;if(!t&&this.nextCurrentTab===e)return!1;this.nextCurrentTab=e;var a=r.tabs,o=r.onChange;if(e>=0&&e<a.length){if(!t&&(o&&o(a[e],e),void 0!==r.page))return!1;this.setState(P()({currentTab:e},n))}return!0}},{key:"tabClickGoToTab",value:function(e){this.goToTab(e)}},{key:"getTabBarBaseProps",value:function(){var e=this.state.currentTab,t=this.props,n=t.animated,r=t.onTabClick,a=t.tabBarActiveTextColor,o=t.tabBarBackgroundColor,i=t.tabBarInactiveTextColor,s=t.tabBarPosition,l=t.tabBarTextStyle,c=t.tabBarUnderlineStyle,u=t.tabs;return{activeTab:e,animated:!!n,goToTab:this.tabClickGoToTab.bind(this),onTabClick:r,tabBarActiveTextColor:a,tabBarBackgroundColor:o,tabBarInactiveTextColor:i,tabBarPosition:s,tabBarTextStyle:l,tabBarUnderlineStyle:c,tabs:u,instanceId:this.instanceId}}},{key:"renderTabBar",value:function(e,t){var n=this.props.renderTabBar;return!1===n?null:n?n(e):b.a.createElement(t,e)}},{key:"getSubElement",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"$i$-",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"$ALL$",o=e.key||""+r+t,i=n(r,a),s=i[o]||i[a];return s instanceof Function&&(s=s(e,t)),s||null}}]),t}(b.a.PureComponent);_e.defaultProps={tabBarPosition:"top",initialPage:0,swipeable:!0,animated:!0,prerenderingSiblingsNumber:1,tabs:[],destroyInactiveTab:!1,usePaged:!0,tabDirection:"horizontal",distanceToChangeTab:.3};var je=function(e){switch(e){case 2:case 4:return"horizontal";case 8:case 16:return"vertical";default:return"none"}},Ie=function(e){function t(){N()(this,t);var e=j()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.contentPos="",e.isMoving=!1,e}return B()(t,e),t}((function e(){N()(this,e)})),Be=function(e){function t(e){N()(this,t);var n,r,a,o=j()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.onPan=(n=0,r=0,a=void 0,{onPanStart:function(e){o.props.swipeable&&o.props.animated&&(a=je(e.direction),o.setState({isMoving:!0}))},onPanMove:function(e){var t=o.props,i=t.swipeable,s=t.animated,l=t.useLeftInsteadTransform;if(e.moveStatus&&o.layout&&i&&s){var c=o.isTabVertical(),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.isTabVertical(),t=+(""+n).replace("%","");return(""+n).indexOf("%")>=0&&(t/=100,t*=e?o.layout.clientHeight:o.layout.clientWidth),t}();u+=c?"horizontal"===a?0:e.moveStatus.y:"vertical"===a?0:e.moveStatus.x;var p=c?-o.layout.scrollHeight+o.layout.clientHeight:-o.layout.scrollWidth+o.layout.clientWidth;u=Math.min(u,0),u=Math.max(u,p),Te(o.layout,u,"px",c,l),r=u}},onPanEnd:function(){if(o.props.swipeable&&o.props.animated){n=r;var e=o.isTabVertical(),t=o.getOffsetIndex(r,e?o.layout.clientHeight:o.layout.clientWidth);o.setState({isMoving:!1}),t===o.state.currentTab?o.props.usePaged&&Pe(o.layout.style,o.getContentPosByIndex(t,o.isTabVertical(),o.props.useLeftInsteadTransform)):o.goToTab(t)}},setCurrentOffset:function(e){return n=e}}),o.onSwipe=function(e){var t=o.props,n=t.tabBarPosition,r=t.swipeable,a=t.usePaged;if(r&&a&&!o.isTabVertical())switch(n){case"top":case"bottom":switch(e.direction){case 2:o.isTabVertical()||o.goToTab(o.prevCurrentTab+1);case 8:o.isTabVertical()&&o.goToTab(o.prevCurrentTab+1);break;case 4:o.isTabVertical()||o.goToTab(o.prevCurrentTab-1);case 16:o.isTabVertical()&&o.goToTab(o.prevCurrentTab-1)}}},o.setContentLayout=function(e){o.layout=e},o.state=P()({},o.state,new Ie,{contentPos:o.getContentPosByIndex(o.getTabIndex(e),o.isTabVertical(e.tabDirection),e.useLeftInsteadTransform)}),o}return B()(t,e),S()(t,[{key:"goToTab",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props.usePaged,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.props,o=a.tabDirection,i=a.useLeftInsteadTransform,s={};return r&&(s={contentPos:this.getContentPosByIndex(e,this.isTabVertical(o),i)}),ee()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"goToTab",this).call(this,e,n,s,a)}},{key:"tabClickGoToTab",value:function(e){this.goToTab(e,!1,!0)}},{key:"getContentPosByIndex",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=100*-e+"%";if(this.onPan.setCurrentOffset(r),n)return""+r;var a=t?"0px, "+r:r+", 0px";return"translate3d("+a+", 1px)"}},{key:"renderContent",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSubElements(),n=this.props,r=n.prefixCls,a=n.tabs,o=n.animated,i=n.destroyInactiveTab,s=n.useLeftInsteadTransform,l=this.state,c=l.currentTab,u=l.isMoving,p=l.contentPos,d=this.isTabVertical(),f=r+"-content-wrap";o&&!u&&(f+=" "+f+"-animated");var m=o?s?P()({position:"relative"},this.isTabVertical()?{top:p}:{left:p}):Ce(p):P()({position:"relative"},this.isTabVertical()?{top:100*-c+"%"}:{left:100*-c+"%"}),h=this.getTabBarBaseProps(),v=h.instanceId;return b.a.createElement("div",{className:f,style:m,ref:this.setContentLayout},a.map((function(n,a){var o=r+"-pane-wrap";e.state.currentTab===a?o+=" "+o+"-active":o+=" "+o+"-inactive";var s=n.key||"tab_"+a;return e.shouldRenderTab(a)?e.tabCache[a]=e.getSubElement(n,a,t):i&&(e.tabCache[a]=void 0),b.a.createElement(we,{key:s,className:o,active:c===a,role:"tabpanel","aria-hidden":c!==a,"aria-labelledby":"m-tabs-"+v+"-"+a,fixX:d,fixY:!d},e.tabCache[a])})))}},{key:"render",value:function(){var e=this.props,t=e.prefixCls,n=e.tabBarPosition,r=e.tabDirection,a=e.useOnPan,o=e.noRenderContent,i=this.isTabVertical(r),s=P()({},this.getTabBarBaseProps()),l=!i&&a?this.onPan:{},c=[b.a.createElement("div",{key:"tabBar",className:t+"-tab-bar-wrap"},this.renderTabBar(s,Oe)),!o&&b.a.createElement(ye,P()({key:"$content",onSwipe:this.onSwipe},l),this.renderContent())];return b.a.createElement("div",{className:t+" "+t+"-"+r+" "+t+"-"+n},"top"===n||"left"===n?c:c.reverse())}}]),t}(_e);Be.DefaultTabBar=Oe,Be.defaultProps=P()({},_e.defaultProps,{prefixCls:"rmc-tabs",useOnPan:!0});var Ae=function(e){function t(){return N()(this,t),j()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return B()(t,e),t}(Oe);Ae.defaultProps=P()({},Oe.defaultProps,{prefixCls:"am-tabs-default-bar"});var Me=function(e){function t(){N()(this,t);var e=j()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.renderTabBar=function(t){var n=e.props.renderTab;return g.createElement(Ae,P()({},t,{renderTab:n}))},e}return B()(t,e),S()(t,[{key:"render",value:function(){return g.createElement(Be,P()({renderTabBar:this.renderTabBar},this.props))}}]),t}(g.PureComponent),Le=Me;Me.DefaultTabBar=Ae,Me.defaultProps={prefixCls:"am-tabs"};var De=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n},Ue=function(e){function t(){return N()(this,t),j()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return B()(t,e),S()(t,[{key:"render",value:function(){var e,t,n=this.props,r=n.className,a=n.prefixCls,o=n.children,i=n.text,s=n.size,l=n.overflowCount,c=n.dot,u=n.corner,p=n.hot,d=De(n,["className","prefixCls","children","text","size","overflowCount","dot","corner","hot"]);l=l,i="number"==typeof i&&i>l?l+"+":i,c&&(i="");var f=M()((e={},w()(e,a+"-dot",c),w()(e,a+"-dot-large",c&&"large"===s),w()(e,a+"-text",!c&&!u),w()(e,a+"-corner",u),w()(e,a+"-corner-large",u&&"large"===s),e)),m=M()(a,r,(t={},w()(t,a+"-not-a-wrapper",!o),w()(t,a+"-corner-wrapper",u),w()(t,a+"-hot",!!p),w()(t,a+"-corner-wrapper-large",u&&"large"===s),t));return g.createElement("span",{className:m},o,(i||c)&&g.createElement("sup",P()({className:f},d),i))}}]),t}(g.Component),Re=Ue;Ue.defaultProps={prefixCls:"am-badge",size:"small",overflowCount:99,dot:!1,corner:!1};var ze=function(e){function t(){N()(this,t);var e=j()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.renderIcon=function(){var t=e.props,n=t.dot,r=t.badge,a=t.selected,o=t.selectedIcon,i=t.icon,s=t.title,l=t.prefixCls,c=a?o:i,u=g.isValidElement(c)?c:g.createElement("img",{className:l+"-image",src:c?c.uri:c,alt:s});return r?g.createElement(Re,{text:r,className:l+"-badge tab-badge"}," ",u," "):n?g.createElement(Re,{dot:!0,className:l+"-badge tab-dot"},u):u},e.onClick=function(){var t=e.props.onClick;t&&t()},e}return B()(t,e),S()(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.prefixCls,r=e.selected,a=e.unselectedTintColor,o=e.tintColor,i=r?o:a;return g.createElement("div",P()({},this.props.dataAttrs,{onClick:this.onClick,className:""+n}),g.createElement("div",{className:n+"-icon",style:{color:i}},this.renderIcon()),g.createElement("p",{className:n+"-title",style:{color:r?o:a}},t))}}]),t}(g.PureComponent),Ve=function(e){function t(){return N()(this,t),j()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return B()(t,e),S()(t,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,n=e.style;return g.createElement("div",{className:t,style:n},this.props.children)}}]),t}(g.Component);Ve.defaultProps={prefixCls:"am-tab-bar-item",title:""};var Fe=function(e){function t(){N()(this,t);var e=j()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.getTabs=function(){var t=[];return g.Children.forEach(e.props.children,(function(e){e&&t.push(P()({},e.props))})),t},e.renderTabBar=function(){var t=e.props,n=t.barTintColor,r=t.prefixCls,a=t.tintColor,o=t.unselectedTintColor,i=t.hidden,s=t.tabBarPosition,l=e.getTabs(),c=Array.isArray(l)?l.map((function(t,n){return g.createElement(ze,{key:n,prefixCls:e.props.prefixCls+"-tab",badge:t.badge,dot:t.dot,selected:t.selected,icon:t.icon,selectedIcon:t.selectedIcon,title:t.title,tintColor:a,unselectedTintColor:o,dataAttrs:J(t),onClick:function(){return t.onPress&&t.onPress()}})})):null,u=r+"-bar";return i&&(u+=" "+r+"-bar-hidden-"+s),g.createElement("div",{className:u,style:{backgroundColor:n}},c)},e}return B()(t,e),S()(t,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,n=e.children,r=e.animated,a=e.swipeable,o=e.noRenderContent,i=e.prerenderingSiblingsNumber,s=e.tabBarPosition,l=this.getTabs(),c=0;return Array.isArray(l)&&l.forEach((function(e,t){e.selected&&(c=t)})),g.createElement("div",{className:t},g.createElement(Le,{tabs:l,renderTabBar:this.renderTabBar,tabBarPosition:s,page:c<0?void 0:c,animated:r,swipeable:a,noRenderContent:o,prerenderingSiblingsNumber:i},n))}}]),t}(g.Component);Fe.defaultProps={prefixCls:"am-tab-bar",barTintColor:"white",tintColor:"#108ee9",hidden:!1,unselectedTintColor:"#888",placeholder:"正在加载",animated:!1,swipeable:!1,prerenderingSiblingsNumber:1,tabBarPosition:"bottom"},Fe.Item=Ve;var Ge=Fe,We=n(261),He=n(252),Ye=n(332),Xe=n.n(Ye),$e=n(49);class qe extends b.a.PureComponent{render(){const{views:e,dispatch:t}=this.props;return b.a.createElement("div",{className:Xe.a.root+" g-doc-width"},b.a.createElement(Ge,{noRenderContent:!0,barTintColor:"#108ee9",tintColor:"#ff0",unselectedTintColor:"#fff"},b.a.createElement(Ge.Item,{icon:b.a.createElement(We.b,{type:We.a.PICTURE}),selectedIcon:b.a.createElement(We.b,{type:We.a.PICTURE}),title:"组团",key:"photos",selected:!!e.photos,onPress:()=>{historyActions.push({paths:[viewNames.appMain,viewNames.photosList],params:{photos:{_listKey:Object($e.f)()}}})}}),b.a.createElement(Ge.Item,{title:"分享",key:"videos",icon:b.a.createElement(We.b,{type:We.a.LIVE}),selectedIcon:b.a.createElement(We.b,{type:We.a.LIVE}),selected:!!e.videos,onPress:()=>{historyActions.push({paths:[viewNames.appMain,viewNames.videosList],params:{videos:{_listKey:Object($e.f)()}}})}}),b.a.createElement(Ge.Item,{icon:b.a.createElement(We.b,{type:We.a.MESSAGE}),selectedIcon:b.a.createElement(We.b,{type:We.a.MESSAGE}),title:"消息",key:"messages",selected:!!e.messages,onPress:()=>{this.props.hasLogin?historyActions.push({paths:[viewNames.appMain,viewNames.messagesList],params:{messages:{_listKey:Object($e.f)()}}}):t(Object(o.f)(new He.b))}})))}}var Ke=reduxConnect(e=>({views:e.route.data.views,hasLogin:e.app.curUser.hasLogin}))(qe),Ze=(n(137),n(96)),Je=n(333),Qe=n.n(Je);var et=e=>{const{loading:t}=e;return t===o.c.Start||t===o.c.Depth?b.a.createElement("div",{className:Qe.a.root+t},b.a.createElement(Ze.a,{className:"loading-icon",type:"loading"}),b.a.createElement("div",{className:"wrap"})):null},tt=(n(255),n(256)),nt=(n(293),function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n}),rt=function(e){function t(){return N()(this,t),j()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return B()(t,e),S()(t,[{key:"render",value:function(){return g.createElement("div",{className:"am-list-brief",style:this.props.style},this.props.children)}}]),t}(g.Component),at=function(e){function t(e){N()(this,t);var n=j()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=function(e){var t=n.props,r=t.onClick,a=t.platform;if(r&&"android"===a){n.debounceTimeout&&(clearTimeout(n.debounceTimeout),n.debounceTimeout=null);var o=e.currentTarget,i=Math.max(o.offsetHeight,o.offsetWidth),s=e.currentTarget.getBoundingClientRect(),l={width:i+"px",height:i+"px",left:e.clientX-s.left-o.offsetWidth/2+"px",top:e.clientY-s.top-o.offsetWidth/2+"px"};n.setState({coverRippleStyle:l,RippleClicked:!0},(function(){n.debounceTimeout=setTimeout((function(){n.setState({coverRippleStyle:{display:"none"},RippleClicked:!1})}),1e3)}))}r&&r(e)},n.state={coverRippleStyle:{display:"none"},RippleClicked:!1},n}return B()(t,e),S()(t,[{key:"componentWillUnmount",value:function(){this.debounceTimeout&&(clearTimeout(this.debounceTimeout),this.debounceTimeout=null)}},{key:"render",value:function(){var e,t,n,r=this,a=this.props,o=a.prefixCls,i=a.className,s=a.activeStyle,l=a.error,c=a.align,u=a.wrap,p=a.disabled,d=a.children,f=a.multipleLine,m=a.thumb,h=a.extra,v=a.arrow,b=a.onClick,y=nt(a,["prefixCls","className","activeStyle","error","align","wrap","disabled","children","multipleLine","thumb","extra","arrow","onClick"]),C=(y.platform,nt(y,["platform"])),E=this.state,T=E.coverRippleStyle,k=E.RippleClicked,x=M()(o+"-item",i,(e={},w()(e,o+"-item-disabled",p),w()(e,o+"-item-error",l),w()(e,o+"-item-top","top"===c),w()(e,o+"-item-middle","middle"===c),w()(e,o+"-item-bottom","bottom"===c),e)),S=M()(o+"-ripple",w()({},o+"-ripple-animate",k)),O=M()(o+"-line",(t={},w()(t,o+"-line-multiple",f),w()(t,o+"-line-wrap",u),t)),N=M()(o+"-arrow",(n={},w()(n,o+"-arrow-horizontal","horizontal"===v),w()(n,o+"-arrow-vertical","down"===v||"up"===v),w()(n,o+"-arrow-vertical-up","up"===v),n)),_=g.createElement("div",P()({},C,{onClick:function(e){r.onClick(e)},className:x}),m?g.createElement("div",{className:o+"-thumb"},"string"==typeof m?g.createElement("img",{src:m}):m):null,g.createElement("div",{className:O},void 0!==d&&g.createElement("div",{className:o+"-content"},d),void 0!==h&&g.createElement("div",{className:o+"-extra"},h),v&&g.createElement("div",{className:N,"aria-hidden":"true"})),g.createElement("div",{style:T,className:S})),j={};return Object.keys(C).forEach((function(e){/onTouch/i.test(e)&&(j[e]=C[e],delete C[e])})),g.createElement(H.a,P()({},j,{disabled:p||!b,activeStyle:s,activeClassName:o+"-item-active"}),_)}}]),t}(g.Component);at.defaultProps={prefixCls:"am-list",align:"middle",error:!1,multipleLine:!1,wrap:!1,platform:"ios"},at.Brief=rt;var ot=at,it=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n},st=function(e){function t(){return N()(this,t),j()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return B()(t,e),S()(t,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,n=e.children,r=e.className,a=e.style,o=e.renderHeader,i=e.renderFooter,s=it(e,["prefixCls","children","className","style","renderHeader","renderFooter"]),l=M()(t,r);return g.createElement("div",P()({className:l,style:a},s),o?g.createElement("div",{className:t+"-header"},"function"==typeof o?o():o):null,n?g.createElement("div",{className:t+"-body"},n):null,i?g.createElement("div",{className:t+"-footer"},"function"==typeof i?i():i):null)}}]),t}(g.Component),lt=st;st.Item=ot,st.defaultProps={prefixCls:"am-list"};n(265);var ct=n(268),ut=n(257),pt=(n(140),n(64)),dt=(n(335),n(300));class ft extends b.a.PureComponent{constructor(...e){super(...e),Object(K.a)(this,"onSubmit",()=>{const{validateFields:e,getFieldError:t}=this.props.form;e((e,n)=>{if(e){const n=Object.keys(e)[0],r=t(n).join(", ");pt.a.info(r,3)}else this.props.dispatch(actions.app.login(n))})})}render(){const{form:{getFieldProps:e}}=this.props,t=e("username",{initialValue:"",rules:[{required:!0,message:"请输入用户名！"}]}),n=e("password",{initialValue:"",rules:[{required:!0,message:"请输入密码！"}]});return b.a.createElement("div",{className:"app-LoginPop"},b.a.createElement(lt,{className:"bd"},b.a.createElement(ct.a,Object(ut.a)({},t,{clear:!0,placeholder:"用户名"})),b.a.createElement(ct.a,Object(ut.a)({},n,{clear:!0,placeholder:"密码",type:"password"}))),b.a.createElement("div",{className:"ft"},b.a.createElement(tt.a,{type:"primary",onClick:this.onSubmit},"登录"),b.a.createElement("div",{className:"links"},b.a.createElement("span",null,"+ 注册新会员"))))}}var mt=reduxConnect()(Object(dt.a)()(ft)),ht=n(416),vt=n.n(ht);var gt=()=>b.a.createElement("div",{className:vt.a.root},b.a.createElement("h1",null,"Not Found")),bt=(n(246),function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n}),yt=function(e){function t(){return N()(this,t),j()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return B()(t,e),S()(t,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,n=e.className,r=e.children,a=e.mode,o=e.icon,i=e.onLeftClick,s=e.leftContent,l=e.rightContent,c=bt(e,["prefixCls","className","children","mode","icon","onLeftClick","leftContent","rightContent"]);return g.createElement("div",P()({},c,{className:M()(n,t,t+"-"+a)}),g.createElement("div",{className:t+"-left",role:"button",onClick:i},o?g.createElement("span",{className:t+"-left-icon","aria-hidden":"true"},o):null,s),g.createElement("div",{className:t+"-title"},r),g.createElement("div",{className:t+"-right"},l))}}]),t}(g.Component),Ct=yt;yt.defaultProps={prefixCls:"am-navbar",mode:"dark",onLeftClick:function(){}};var Et=n(417),Tt=n.n(Et);class Pt extends b.a.PureComponent{constructor(...e){super(...e),Object(K.a)(this,"onShowSearch",()=>{this.props.dispatch(actions.app.putShowSearch(!this.props.showSearch))})}render(){const{logoUrl:e,avatarUrl:t}=this.props;return b.a.createElement("div",{className:Tt.a.root+" g-doc-width"},b.a.createElement(Ct,{icon:b.a.createElement("span",{className:"avatar",style:{backgroundImage:"url("+t+")"}}),rightContent:b.a.createElement("div",{onClick:this.onShowSearch},b.a.createElement(Ze.a,{type:"search"}))},b.a.createElement("img",{src:e,className:"logo"})))}}var kt=reduxConnect(e=>({showSearch:Boolean(e.app.showSearch),logoUrl:e.app.projectConfig.logoUrl,avatarUrl:e.app.curUser.avatarUrl}))(Pt),wt=n(418),xt=n.n(wt);let St;class Ot extends b.a.PureComponent{constructor(...e){super(...e),Object(K.a)(this,"timer",void 0),Object(K.a)(this,"img",void 0),Object(K.a)(this,"onCountEnd",()=>{St&&clearInterval(St),this.props.dispatch(actions.app.putStartup(i.startupCountEnd)),setTimeout(()=>{this.props.dispatch(actions.app.putStartup(i.startupAnimateEnd))},1e3)})}render(){const{className:e}=this.props,{linkUrl:t,imageUrl:n,times:r}=this.props.config,a=t?{target:"_blank",href:t}:{};return b.a.createElement("div",{className:xt.a.root+" g-doc-width g-pre-img "+e},b.a.createElement("a",Object(ut.a)({className:"link"},a,{style:{backgroundImage:"url("+n+")"}})),b.a.createElement("div",{className:"count",onClick:()=>{this.onCountEnd()}},b.a.createElement("i",{className:"iconfont icon-clock_fill"}),"跳过:",b.a.createElement("em",{className:"times",ref:e=>{this.timer=e}},r),b.a.createElement("img",{ref:e=>{this.img=e},style:{position:"absolute",width:"1px",height:"1px",visibility:"hidden"},src:n})))}componentDidMount(){const e=document.getElementById("g-init-loading");if(e){this.img.naturalWidth?this.props.dispatch(actions.app.putStartup(i.startupImageLoaded)):(this.img.onload=()=>{this.props.dispatch(actions.app.putStartup(i.startupImageLoaded))},this.img.onerror=()=>{this.onCountEnd()}),e.parentNode.removeChild(e);let{times:t}=this.props.config;const n=this.timer;St=setInterval(()=>{this.props.startupStep!==i.configLoaded&&(t>0?(t--,n.innerHTML=t+""):this.onCountEnd())},1e3)}}}var Nt=reduxConnect(e=>({startupStep:e.app.startupStep,config:e.app.projectConfig.startupPage}))(Ot);const _t=loadView("photos","Details"),jt=loadView("photos","List"),It=loadView("videos","Details"),Bt=loadView("videos","List"),At=loadView("messages","List");class Mt extends b.a.PureComponent{constructor(...e){super(...e),Object(K.a)(this,"onCloseLoginPop",()=>{this.props.dispatch(actions.app.putShowLoginPop(!1))}),Object(K.a)(this,"onCloseNotFound",()=>{this.props.dispatch(actions.app.putShowNotFoundPop(!1))})}render(){const{showLoginPop:e,showNotFoundPop:t,startupStep:n,globalLoading:r}=this.props;return b.a.createElement("div",{className:moduleNames.app},n!==i.init&&b.a.createElement("div",{className:"g-page"},b.a.createElement(kt,null),b.a.createElement(Z.e,null,b.a.createElement(Z.a,{exact:!0,path:"/",to:"/photos"}),b.a.createElement(Z.b,{exact:!0,path:"/photos",component:jt}),b.a.createElement(Z.b,{exact:!1,path:"/photos/:itemId",component:_t}),b.a.createElement(Z.b,{exact:!0,path:"/videos",component:Bt}),b.a.createElement(Z.b,{exact:!1,path:"/videos/:itemId",component:It}),b.a.createElement(Z.b,{exact:!0,path:"/messages",component:At}),b.a.createElement(Z.b,{component:gt})),b.a.createElement(Ke,null)),(n===i.configLoaded||n===i.startupImageLoaded||n===i.startupCountEnd)&&b.a.createElement(Nt,{className:n}),b.a.createElement(q,{visible:e,transparent:!0,onClose:this.onCloseLoginPop,title:"请登录",closable:!0},b.a.createElement(mt,null)),b.a.createElement(q,{visible:t,transparent:!0,onClose:this.onCloseNotFound,title:"找不到",closable:!0},b.a.createElement(gt,null)),b.a.createElement(et,{loading:r}))}}var Lt=reduxConnect(e=>{const t=e.app;return{showLoginPop:!(!t.showLoginPop||t.curUser.hasLogin),showNotFoundPop:!!t.showNotFoundPop,startupStep:t.startupStep,globalLoading:t.loading.global}})(Mt);t.default=Object(o.h)("app",h,v,{Main:Lt})}}]);